# DEC-0002 — Лицензирование порта и политика third-party компонентов

## Контекст
- Проект: портирование Chainsaw (Rust) → C++ с требованием эквивалентности поведения 1:1 и кроссплатформенности.
- Зафиксированы baseline-источники и их происхождение: см. `docs/baseline/BASELINE-0001-upstream.md`.
- В проекте используются внешние входные артефакты:
 - Chainsaw
 - Sigma rules
 - EVTX-ATTACK-SAMPLES

К моменту принятия решения важно зафиксировать:
1) какие лицензии у upstream-источников;
2) какие обязательства по включению/атрибуции/распространению возникают;
3) какие правила действуют при переносе кода и данных в репозиторий порта.

## Решение
1) Зафиксировать лицензии upstream-источников в едином реестре:
 - `docs/licensing/LIC-0001-upstream-licenses.md`.

2) Ввести политику работы со сторонними компонентами/данными:
 - `docs/licensing/POL-0001-third-party-policy.md`.

3) Принять рабочий дефолт по лицензии репозитория порта:
 - в корне репозитория должен присутствовать файл `LICENSE` с текстом **GNU GPL v3**.

 Обоснование: upstream Chainsaw содержит текст GPL v3 и маркирован как GPL (`Cargo.toml: license = "GPL3"`). При портировании по исходникам как минимум часть результата будет производной работой.

4) До формализации политики тестовых данных не коммитить крупные upstream датасеты целиком.
 - В репозиторий допускаются только лицензии/метаданные и минимальные технические заглушки.

## Альтернативы
A) Не фиксировать лицензию репозитория до консультации с юристами.
- Плюсы: избегаем преждевременной фиксации.
- Минусы: высокий риск случайного несоответствия при добавлении кода/данных; сложнее строить автоматизируемую доказательную базу.

B) Рассматривать clean-room стратегию как способ изменить лицензионный режим.
- Плюсы: потенциально снижает ограничения на распространение.
- Минусы: юридически и организационно сложно; требует отдельного процесса и доказательств независимой разработки; противоречит практической задаче «портирования» как она сформулирована в проекте.

## Обоснование выбора
- Лицензии и требования к атрибуции должны быть зафиксированы как можно раньше, т.к. они напрямую влияют на:
 - допустимые зависимости;
 - правила включения данных в репозиторий;
 - требования к формированию вывода (например, сохранение поля `author` для Sigma правил).

## Последствия
- Репозиторий получает явный лицензионный режим (GPL v3) как дефолт.
- Любое добавление сторонних компонент/данных должно проходить через реестр лицензий и политику.

## Критерии пересмотра
Решение пересматривается, если появится одно из следующих доказательств/событий:
- получено официальное и проверяемое право на иной режим лицензирования upstream (например, коммерческая лицензия/исключение);
- принято решение о clean-room реализации с юридически подтверждённым процессом;
- обнаружены дополнительные лицензионные ограничения внутри upstream датасетов, требующие изменения политики.
