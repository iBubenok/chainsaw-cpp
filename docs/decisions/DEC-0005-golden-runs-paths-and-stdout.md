# DEC-0005 — Нормализация путей и запись stdout напрямую в golden runs

## Контекст
- Golden runs должны быть кроссплатформенными: Windows/Linux/macOS.
- Для сравнения 1:1 важен **байт‑в‑байт** вывод stdout/stderr.
- При автоматизации запуска возникают частые ошибки:
 - различия разделителей путей (`\` vs `/`),
 - пробелы/спецсимволы в путях,
 - некорректное преобразование переносов строк или форматирования таблиц.

## Решение
1) Нормализовать работу с путями в скриптах golden runs через `pathlib`.
2) Для stdout/stderr сохранять вывод **напрямую в файл** (без промежуточных преобразований), чтобы сохранить табличное/ANSI‑форматирование и точные переводы строк.

## Альтернативы
A) Конкатенация путей строками и пост‑обработка вывода.
- Минусы: высокая вероятность платформенных ошибок и невидимых преобразований.

B) Сохранять только нормализованный/очищенный вывод.
- Минусы: ухудшает доказательность 1:1 и может скрыть реальные расхождения.

## Обоснование выбора
- `pathlib` уменьшает риск ошибок quoting/escaping.
- Прямое сохранение stdout/stderr повышает воспроизводимость и снижает вероятность «случайной нормализации».

## Последствия
- В будущих шагах дифф‑harness должен уметь сравнивать «сырые» файлы вывода и, при необходимости, применять нормализацию только по отдельному решению (см. GOV-0002).

## Критерии проверки/пересмотра
- Наличие сценария с пробелами в путях (например, ``) и его стабильный результат на всех целевых ОС.
