# DEC-0006 — Совместимость golden runs со штатным Python 3.9 (macOS) и пересъём macOS эталонов

## Контекст
- На macOS в целевом окружении может использоваться штатный Python 3.9.
- Скрипты golden runs должны работать без дополнительного стека зависимостей, чтобы не усложнять воспроизводимость.
- Ранние варианты скриптов могли использовать синтаксис, недоступный в Python 3.9 (например, `str | None`).
- Требуются достоверные macOS эталоны, собранные на native macOS release‑бинаре Chainsaw.

## Решение
1) Поддерживать совместимость golden runs скриптов с Python 3.9.
2) Получить и зафиксировать macOS golden runs, собранные в native macOS окружении (release бинарь) по единому `RUN-*` набору.

## Альтернативы
A) Требовать Python 3.10+.
- Минусы: усложнение воспроизводимости, неочевидные требования для CI/локальных прогонов.

B) Оставить macOS эталоны без пересъёма.
- Минусы: риски неверных доказательств и скрытых платформенных отличий.

## Обоснование выбора
- Python 3.9 совместимость снижает «операционный барьер» для воспроизводимых прогонов.
- Пересъём macOS эталонов обеспечивает корректность сравнений и снижает неопределённость по платформенным отличиям.

## Последствия
- Код скриптов должен избегать синтаксиса/фич, требующих Python 3.10+.
- В отчётах golden runs необходимо фиксировать метаданные сборки и окружения (`env.json`, `build.json`).

## Критерии проверки/пересмотра
- Скрипты успешно выполняются под Python 3.9.
- Наличие актуального архива `rust_golden_runs_macos_*` как артефакта Projects.
