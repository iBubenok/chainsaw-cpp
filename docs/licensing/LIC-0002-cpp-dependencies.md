# LIC-0002 — Реестр лицензий C++ зависимостей порта (+, обновлено )

## Статус
- **Версия**: 2
- **Дата**: 2026-01-16
- **Последний аудит**: (RC1)

## Цель
Зафиксировать выбранные сторонние зависимости C++ порта Chainsaw, их назначение и лицензионные обязательства.

## Scope
Включаются:
- сторонние библиотеки, исходники которых поставляются вместе с портом (vendoring);
- зависимости, требуемые для сборки/тестов.

Не включаются:
- стандартная библиотека C++ и системные API целевых ОС;
- данные/датасеты (они регулируются `LIC-0001` и политикой данных `POL-0003`).

## Связанные документы
- `POL-0001` — политика работы со сторонними компонентами/данными
- `ADR-0002` — стратегия vendoring и офлайн‑сборки
- — реестр артефактов проекта
- `REP-0010` — финальный протокол проверок RC1

## Статусы
- **Planned** — библиотека выбрана ADR, но исходники ещё не включены в репозиторий.
- **Vendored** — исходники включены в репозиторий, лицензия требует проверки.
- **Verified** — лицензия проверена по upstream файлам, копия в `third_party/licenses/`.

---

## Таблица зависимостей

| Компонент | Назначение | Upstream | Baseline | Лицензия | Файл доказательство | Статус | ADR |
|-----------|------------|----------|----------|----------|---------------------|--------|-----|
| RapidJSON | JSON DOM + генерация JSON/JSONL | https://github.com/Tencent/rapidjson | HEAD | **MIT** | `third_party/rapidjson/license.txt` → `third_party/licenses/rapidjson-MIT.txt` | **Verified** | ADR-0003 |
| pugixml | XML парсинг (EVTX/XML входы) | https://github.com/zeux/pugixml | v1.14 | **MIT** | `third_party/pugixml/LICENSE.md` → `third_party/licenses/pugixml-MIT.txt` | **Verified** | — |
| yaml-cpp | YAML парсинг Sigma/Chainsaw rules | https://github.com/jbeder/yaml-cpp | v0.8.0 | **MIT** | `third_party/yaml-cpp/LICENSE` → `third_party/licenses/yaml-cpp-MIT.txt` | **Verified** | ADR-0004 |
| GoogleTest | Модульные/интеграционные тесты | https://github.com/google/googletest | v1.15.2 | **BSD-3-Clause** | `third_party/googletest/LICENSE` | **Verified** | ADR-0008 |

---

## Совместимость с GPL v3

| Лицензия | SPDX ID | Совместимость |
|----------|---------|---------------|
| MIT | MIT | ✅ Совместима (пермиссивная) |
| BSD-3-Clause | BSD-3-Clause | ✅ Совместима (пермиссивная) |

**Вердикт**: все зависимости совместимы с GPL v3 — проект может распространяться под GPL v3.

---

## Лицензионные обязательства

### RapidJSON (MIT)
- **Требования**: сохранение copyright notice и лицензии при распространении
- **Выполнение**: копия в `third_party/licenses/rapidjson-MIT.txt`

### pugixml (MIT)
- **Требования**: сохранение copyright notice и лицензии при распространении
- **Выполнение**: копия в `third_party/licenses/pugixml-MIT.txt`

### yaml-cpp (MIT)
- **Требования**: сохранение copyright notice и лицензии при распространении
- **Выполнение**: копия в `third_party/licenses/yaml-cpp-MIT.txt`

### GoogleTest (BSD-3-Clause)
- **Требования**: сохранение copyright notice, disclaimer при распространении
- **Выполнение**: используется только для тестов, не входит в продуктовый бинарник
- **Примечание**: не требует включения в дистрибутив (test-only dependency)

---

## Sigma Rules (DRL 1.1)

Для Sigma правил применяется Detection Rule License 1.1:
- **Файл**: `third_party/licenses/DRL-1.1.txt`
- **Требования**:
 1. Сохранение `author` field при распространении правил
 2. URI/ссылка на правила где возможно
 3. Указание DRL 1.1 лицензии
 4. Сохранение `author` в сообщениях на основе срабатываний

**Выполнение**: POL-004 обеспечивает соблюдение DRL 1.1.

---

## Pending зависимости (не включены)

| Компонент | Причина | Статус |
|-----------|---------|--------|
| RE2 | std::regex достаточен | Pending (ADR-0005) |
| libesedb | Собственный ESEDB парсер | Не требуется |
| libevtx | Собственный EVTX парсер | Не требуется |
| libregf | Собственный HVE парсер | Не требуется |
| libfsntfs | Собственный MFT парсер | Не требуется |
| fmt | std::format в C++20 | Не требуется |

---

## История изменений

| Дата | Версия | Изменения |
|------|--------|-----------|
| 2026-01-09 | 1 | Начальная версия |
| 2026-01-16 | 2 | Финальный аудит RC1: обновлены статусы, добавлены версии |

---

> Документ обновлён: 2026-01-16 ( — RC1 License Audit)
