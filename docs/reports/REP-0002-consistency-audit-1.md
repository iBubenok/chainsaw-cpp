# REP-0002 — Аудит консистентности документов №1

Дата: 2026-01-03

## Цель
Проверить пакет To‑Be документов (–22) на:
- противоречия между документами;
- дублирование информации, нарушающее Single Source of Truth (SoT);
- непрерывность трассируемости (минимум: `REQ-* → (ADR/DEC) → MOD-* → TST-* / RUN-*`).

Результат: зафиксировать найденные несогласованности, устранить их и оставить пакет документов в состоянии, пригодном для.

## Объём аудита (что проверялось)
### Single Source of Truth документы –22
- `TASK-0001` — `docs/requirements/TASK-0001-problem-statement.md`
- `AR-0001` — `docs/requirements/AR-0001-architectural-requirements.md`
- `ARCH-0002` — `docs/architecture/ARCH-0002-cpp-technology-options-matrix.md`
- `ADR-0001...ADR-0011` — `docs/adr/*` +
- `TOBE-0001` — `docs/architecture/TOBE-0001-cpp-to-be-architecture.md`
- `WBS-0001` — `docs/planning/WBS-0001-work-breakdown-and-estimates.md`
- `GUIDE-0001` — `docs/guide/GUIDE-0001-developer-guide.md`
- `GOV-0003` — `docs/governance/GOV-0003-architecture-approval-package.md`

### Управляющие документы/реестры (для проверки связности)
- `GOV-0001` — `docs/governance/GOV-0001-traceability-and-sot.md`
- `GOV-0002` — `docs/governance/GOV-0002-equivalence-criteria.md`
-
-
-

## Методика (checks)
1) **SoT‑комплаенс:** требования `REQ-*` сформулированы только в `AR-0001`; в остальных документах — только ссылки.
2) **ID‑целостность:** ссылки на `REQ/ADR/DEC/MOD/TST/RUN/RISK` соответствуют существующим сущностям.
3) **Трассируемость:** для ключевых CLI поверхностей (`search/hunt/dump/lint/analyse srum/analyse shimcache`) минимум одна цепочка замыкается.
4) **Согласованность доказательной базы:** привязки к `RUN-*` и `TST-*` совпадают с `REP-0001` и `TESTMAT-0001`.

## Найденные несогласованности и исправления

### F-01 — Неверная привязка `dump` к `RUN-*` в `TOBE-0001`
**Симптом:** в `TOBE-0001` для `dump` использовались `*` (группа `search`), что противоречит `TASK-0001`, `AR-0001` и `WBS-0001`, где `dump` привязан к `..`.

**Исправление:**
- `TOBE-0001/5.2` и `TOBE-0001/8` обновлены: `dump` → `..`.

**Проверка после исправления:**
- `TASK-0001/3.2` и `WBS-0001/WBS-4.13` согласованы с `TOBE-0001`.

---

### F-02 — Неверная трассировка `analyse shimcache` в
**Симптом:** `analyse shimcache` был связан с `TST-0007` и `..`, хотя baseline прямо фиксирует отсутствие входных данных и отсутствующее покрытие `RUN-*`/upstream тестами (см. `RISK-0022`, `TASK-0001/3.2`, `REP-0001`).

**Исправление:**
- строка `analyse shimcache` в изменена на явное состояние покрытия: нет baseline `TST-*` и нет `RUN-*` для shimcache; требуется добавить фикстуры и сценарии — `RISK-0022`.

**Проверка после исправления:**
- согласовано с `TASK-0001` (non‑coverage), `AR-0001/REQ-FR-0007` (условие «при наличии входных данных»), `TOBE-0001/5.7`.

---

### F-03 — Неполное перечисление `RUN-*` для `lint` в `TOBE-0001`
**Симптом:** в `TOBE-0001/8` для `lint` отсутствовал ``, хотя `AR-0001/REQ-FR-0005` и `WBS-0001/WBS-4.16` включают `` как часть proof‑набора.

**Исправление:**
- `TOBE-0001/8` обновлён: `lint` → `..`, ``.

---

### F-04 — Неполная модульная привязка `search` в
**Симптом:** в для `search` в колонке `MOD-*` отсутствовал `MOD-0011` (engine `search`), из-за чего цепочка `REQ → MOD` была неполной и не совпадала с `TOBE-0001`.

**Исправление:**
- строка `search` в обновлена: добавлен `MOD-0011`.

## Дублирование (SoT)
Нарушений SoT, требующих переработки структуры документов, не выявлено:
- формулировки требований остаются только в `AR-0001`;
- решения остаются только в `ADR-*`/`DEC-*` (индекс — );
- To‑Be модульные границы остаются в `TOBE-0001`.

## Результат аудита
**PASS**: критические несогласованности устранены; доказательная база (`TST-*`/`RUN-*`) согласована между постановкой/AR/WBS/To‑Be/traceability.

## Остаточные риски (не являются находками аудита )
Открытые риски остаются по реестру без изменений:
- `RISK-0022` — отсутствие данных для `analyse shimcache` (план закрытия описан в реестре);
- pending‑решения по парсерам в `ADR-0009` (не блокируют при соблюдении To‑Be границ).
